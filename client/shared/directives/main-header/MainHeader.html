<!--
TODO:
    shim animation?
-->

<header class="usa-header usa-header-extended" role="banner">
    <div class="top-row">
        <div class="container">
            <div class="row">
                <div class="col-md-12">
                    <div class="d-flex flex-row justify-content-end align-items-center">
                        <div class="language">
                            <language-selector isLight="true"></language-selector>
                        </div>
                        <a class="usa-nav-link" href="javascript:void(0)" (click)="logout()">
                            <span data-i18n="logout"></span>
                        </a>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <div class="bottom-row">
        <div class="container">
            <div class="row">
                <div class="col-md-12">
                    <div class="d-flex flex-row align-items-end">
                        <div class="logo"></div>
                        <div class="flex-spacer"></div>
                        <div class="medium-link-set">
                            <div class="d-flex flex-row align-items-end">
                                <a class="usa-nav-link" [routerLink]="['/shop/products']">
                                    <span data-i18n="shop"></span>
                                </a>
                                <a class="usa-nav-link" [routerLink]="['/shop/orders']">
                                    <span data-i18n="orders"></span>
                                </a>
                                <a class="usa-nav-link" [routerLink]="['/shop/budget']">
                                    <span data-i18n="budget"></span>
                                </a>
                                <a class="usa-nav-link" [routerLink]="['/shop/cart']">
                                    <cart-counter></cart-counter>
                                </a>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <div class="hamburger" (click)="openMenu()">
            <div class="full-height d-flex flex-column justify-content-center align-items-center">
                <div class="lines"></div>
                <div class="menu" data-i18n="menu"></div>
            </div>
        </div>
    </div>
    <div class="slide-menu" [class.open]="isSlideMenuOpen">
        <div class="blocker" [@blockerVisible]="menuAnimationState"></div>
        <div class="menu" [@menuSlide]="menuAnimationState" (@menuSlide.done)="onCloseComplete()">
            <div class="close-container">
                <button class="close" (click)="closeMenu()">
                    <span class="sr-only" data-i18n="closeMenu"></span>
                </button>
            </div>
            <ul class="usa-sidenav-list">
                <li>
                    <a [routerLink]="['/shop/products']" (click)="closeMenu()">
                        <span data-i18n="shop"></span>
                    </a>
                </li>
                <li>
                    <a [routerLink]="['/shop/orders']" (click)="closeMenu()">
                        <div class="d-flex flex-row justify-content-between align-items-center">
                            <span data-i18n="orders"></span>
                            <button
                                 class="order-toggle"
                                 [ngClass]="{'drawer-closed': !isOrdersExpanded, 'drawer-open': isOrdersExpanded}"
                                 (click)="toggleOrdersDrawer($event)">
                                <span class="sr-only" data-i18n="toggleOrderGroups"></span>
                            </button>
                        </div>
                    </a>
                    <ul *ngIf="isOrdersExpanded" class="usa-sidenav-sub_list">
                        <li *ngFor="let group of groupedOrders">
                            <a [routerLink]="['/shop/orders', { key: group.key }]" (click)="closeMenu()">
                                <span [attr.data-i18n]="group.key"></span>
                            </a>
                            <ul class="usa-sidenav-sub_list">
                                <li *ngFor="let order of group.orders">
                                    <a [routerLink]="['/shop/orders', order.orderId]" (click)="closeMenu()">
                                        {{order.dateCreated | date: 'M/d/yy' }} ({{order.totalCost | currency:'USD':true }})
                                    </a>
                                </li>
                            </ul>
                        </li>
                    </ul>
                </li>
                <li>
                    <a [routerLink]="['/shop/budget']" (click)="closeMenu()">
                        <span data-i18n="budget"></span>
                    </a>
                </li>
                <li>
                    <a [routerLink]="['/shop/cart']" (click)="closeMenu()">
                        <cart-counter isFlex="true"></cart-counter>
                    </a>
                </li>
            </ul>
        </div>
    </div>
</header>
